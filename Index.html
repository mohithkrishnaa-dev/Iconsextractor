<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FF Icon Extractor</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
--bg:#050506;
--panel:#0b0d12;
--card:#131725;
--border:#1f2433;
--text:#e6e6e6;
--muted:#8c93b3;
--accent:#ffffff;
}

*{box-sizing:border-box;margin:0;padding:0}
body{background:var(--bg);color:var(--text);font-family:system-ui}

/* Header */
header{
padding:12px 14px;
border-bottom:1px solid var(--border);
font-weight:600;
}

/* Controls */
.controls{
display:flex;
gap:6px;
flex-wrap:wrap;
padding:10px;
background:var(--panel);
border-bottom:1px solid var(--border);
}

.controls select,
.controls input{
padding:8px;
border-radius:6px;
background:#080a10;
border:1px solid var(--border);
color:var(--text);
font-size:12px;
}

.controls button{
padding:8px 14px;
border-radius:6px;
border:none;
background:var(--accent);
color:#000;
font-weight:600;
font-size:12px;
cursor:pointer;
}

/* Layout */
.layout{
display:grid;
grid-template-columns:180px 1fr;
}
@media(max-width:900px){
.layout{grid-template-columns:1fr}
}

/* Side heading */
.side{
padding:12px;
background:var(--panel);
border-right:1px solid var(--border);
}
.side h2{
font-size:16px;
letter-spacing:.5px;
}
.side p{
font-size:11px;
color:var(--muted);
margin-top:4px;
}

/* Status */
.status{
padding:8px 12px;
font-size:12px;
color:var(--muted);
border-bottom:1px solid var(--border);
min-height:28px;
}

/* Grid */
.grid{
padding:10px;
display:grid;
grid-template-columns:repeat(auto-fill,minmax(100px,1fr));
gap:8px;
}

.card{
background:var(--card);
border-radius:8px;
padding:6px;
display:flex;
flex-direction:column;
align-items:center;
gap:6px;
}

.card img{
width:100%;
height:70px;
object-fit:contain;
pointer-events:none;
user-select:none;
}

.id{
font-size:10px;
color:var(--muted);
}

.actions{
display:flex;
gap:6px;
width:100%;
}

.actions button{
flex:1;
padding:6px;
border-radius:6px;
border:1px solid var(--border);
background:#080a10;
color:var(--text);
cursor:pointer;
display:flex;
align-items:center;
justify-content:center;
}

/* Footer */
footer{
padding:8px;
text-align:center;
font-size:11px;
color:var(--muted);
border-top:1px solid var(--border);
}

/* Toast */
.toast{
position:fixed;
bottom:20px;
left:50%;
transform:translateX(-50%);
background:#111;
color:#fff;
padding:10px 14px;
border-radius:8px;
font-size:12px;
opacity:0;
pointer-events:none;
transition:opacity .2s;
}
.toast.show{opacity:1}
</style>
</head>

<body>

<header>FF Icon Extractor</header>

<div class="controls">
<select id="server">
<option value="advance">ADV</option>
<option value="live">LIVE</option>
</select>

<select id="ob"></select>
<select id="cat"></select>

<input id="maxScan" type="number" value="200" style="width:80px">

<button onclick="scan()">Scan</button>
</div>

<div class="layout">
  <div class="side" id="sideInfo">
    <h2>‚Äî</h2>
    <p>‚Äî</p>
  </div>

  <div>
    <div class="status" id="status"></div>
    <div class="grid" id="grid"></div>
  </div>
</div>

<footer>Made by MKü§ç</footer>
<div class="toast" id="toast"></div>

<script>
const BASE={
advance:"https://dl.aw.freefiremobile.com/advance/ABHotUpdates/IconCDN/other/",
live:"https://dl.aw.freefiremobile.com/live/ABHotUpdates/IconCDN/other/"
};

const CATEGORY={
"Weapons":{type:"special",prefix:"9071"},
"Collab Frames":{type:"special",prefix:"9260"},
"Skywing":{type:"special",prefix:"9110"},
"Bundle":{type:"normal",prefix:"7100"},
"Face Paint":{type:"normal",prefix:"2140"},
"Head Mask":{type:"normal",prefix:"2110"},
"Tops":{type:"normal",prefix:"2030"},
"Bottoms":{type:"normal",prefix:"2040"},
"Shoes":{type:"normal",prefix:"2050"},
"Backpack":{type:"normal",prefix:"9040"},
"Avatar":{type:"normal",prefix:"9020"},
"Banner":{type:"normal",prefix:"9010"},
"Vehicle":{type:"normal",prefix:"9080"},
"Surfboard":{type:"normal",prefix:"9060"},
"Parachute":{type:"normal",prefix:"9050"},
"Lobby Music":{type:"normal",prefix:"9130"},
"Arrival Animation":{type:"normal",prefix:"9120"},
"Emotes":{type:"normal",prefix:"9090"}
};

for(let i=40;i<=60;i++) ob.innerHTML+=`<option value="${i}">OB${i}</option>`;
ob.value=52;
Object.keys(CATEGORY).forEach(c=>cat.innerHTML+=`<option>${c}</option>`);

const FAIL_LIMIT=6;
const toast=document.getElementById("toast");

function showToast(msg){
toast.textContent=msg;
toast.classList.add("show");
setTimeout(()=>toast.classList.remove("show"),2500);
}

async function scan(){
grid.innerHTML="";
status.textContent="Scanning‚Ä¶";

sideInfo.innerHTML=
`<h2>${cat.value.toUpperCase()}</h2>
<p>OB${ob.value} ‚Ä¢ ${server.value.toUpperCase()}</p>`;

const cfg=CATEGORY[cat.value];
const obv=ob.value;
const srv=BASE[server.value];
const max=maxScan.value;

let found=0,fails=0;

for(let i=1;i<=max;i++){
const id = cfg.type==="special"
? cfg.prefix+"0"+obv+String(i).padStart(2,"0")
: cfg.prefix+obv+String(i).padStart(3,"0");

const url=srv+id+".png";
const ok=await probe(url);

if(!ok){
fails++;
if(fails>=FAIL_LIMIT) break;
continue;
}

fails=0;
found++;
addCard(id,url);
}

status.textContent=
`${cat.value.toUpperCase()} ‚Ä¢ OB${obv} ‚Ä¢ ${server.value.toUpperCase()} ‚Ä¢ Found ${found}`;
}

function probe(url){
return new Promise(res=>{
const img=new Image();
img.onload=()=>res(true);
img.onerror=()=>res(false);
img.src=url;
});
}

/* üîí SECURE-ONLY DOWNLOAD */
async function secureDownload(url,id){
try{
const r=await fetch(url,{mode:"cors"});
if(!r.ok) throw new Error();
const b=await r.blob();
const o=URL.createObjectURL(b);
const a=document.createElement("a");
a.href=o;
a.download=id+".png";
a.click();
URL.revokeObjectURL(o);
}catch{
showToast("Download not supported on this browser");
}
}

function copyID(text){
const t=document.createElement("input");
t.value=text;
document.body.appendChild(t);
t.select();
document.execCommand("copy");
document.body.removeChild(t);
showToast("ID copied");
}

function addCard(id,url){
const c=document.createElement("div");
c.className="card";

const img=document.createElement("img");
img.src=url;

const idDiv=document.createElement("div");
idDiv.className="id";
idDiv.textContent=id;

const actions=document.createElement("div");
actions.className="actions";

const dl=document.createElement("button");
dl.innerHTML=`<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 3v12"/><path d="M7 10l5 5 5-5"/><path d="M5 21h14"/></svg>`;
dl.onclick=()=>secureDownload(url,id);

const copy=document.createElement("button");
copy.innerHTML=`<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13"/><rect x="2" y="2" width="13" height="13"/></svg>`;
copy.onclick=()=>copyID(id);

actions.append(dl,copy);
c.append(img,idDiv,actions);
grid.appendChild(c);
}
</script>

</body>
  </html>
